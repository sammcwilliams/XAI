

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Anchors &mdash; XAI 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/black_box.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Summaries" href="summaries.html" />
    <link rel="prev" title="Partial Dependence Plots (PDP)" href="pdp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> XAI
          

          
            
            <img src="_static/raa-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="start.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#initialisation">Initialisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="featimp.html">Feature Importance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#requisites">Requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#accepted-data">Accepted Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#accepted-models">Accepted Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#dimensionality">Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#caveats">Caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="featimp.html#output-interpretation">Output interpretation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shapley.html">Shapley Values</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="shapley.html#calculation">Calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="shapley.html#plotting">Plotting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#requisites">Requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#accepted-data">Accepted Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#accepted-models">Accepted Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#dimensionality">Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#caveats">Caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapley.html#output-interpretation">Output interpretation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="surrogate.html">Global Surrogate</a><ul>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#requisites">Requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#accepted-data">Accepted Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#accepted-models">Accepted Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#dimensionality">Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#caveats">Caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="surrogate.html#output-interpretation">Output interpretation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cetpar.html">Ceteris Paribus</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cetpar.html#nearest-neighbour">Nearest Neighbour</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#requisites">Requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#accepted-data">Accepted Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#accepted-models">Accepted Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#dimensionality">Dimensionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#caveats">Caveats</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#output-interpretation">Output interpretation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cetpar.html#plot-instances-per-feature-ice">Plot instances per feature (ICE)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id1">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id2">Requisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id3">Accepted Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id4">Accepted Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id5">Dimensionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id6">Caveats</a></li>
<li class="toctree-l3"><a class="reference internal" href="cetpar.html#id7">Output interpretation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lime.html">Local Interpretable Model Explanation (LIME)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="lime.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="lime.html#requisites">Requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="lime.html#accepted-models-data">Accepted Models/Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="lime.html#models">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="lime.html#data">Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lime.html#dimensionality">Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="lime.html#caveats">Caveats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="lime.html#what-s-local">Whatâ€™s Local?</a></li>
<li class="toctree-l3"><a class="reference internal" href="lime.html#inconsistency">Inconsistency</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lime.html#output-interpretation">Output interpretation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pdp.html">Partial Dependence Plots (PDP)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pdp.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#one-feature">One Feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#two-features">Two Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pdp.html#requisites">Requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdp.html#accepted-models-data">Accepted Models/Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#data">Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#models">Models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pdp.html#dimensionality">Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdp.html#caveats">Caveats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#correlation">Correlation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#average-dangerous">Average == Dangerous</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#feature-distribution">Feature Distribution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pdp.html#output-interpretation">Output interpretation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#id1">One feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdp.html#id2">Two features</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Anchors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#requisites">Requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accepted-models-data">Accepted Models/Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data">Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#models">Models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dimensionality">Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caveats">Caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-interpretation">Output interpretation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="summaries.html">Summaries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="summaries.html#summarising-an-instance">Summarising an instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="summaries.html#summarising-a-feature">Summarising a feature</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">XAI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Anchors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/anch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="anchors">
<h1>Anchors<a class="headerlink" href="#anchors" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">Â¶</a></h2>
<p>Anchors are an approach that trains an explainer on your dataset, which then can be given an instance to interpret. The interpretation
you are given is a series of if-then statements that describe the conditions for the prediction. In contrast to other explainability methods that take
individual instances for explanations - Anchors attempt to quanitfy the local area for which the explanation holds true, giving a figure for both precision and coverage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xai</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">anchor_explanation</span><span class="p">(</span><span class="n">test_x</span><span class="p">[</span><span class="mi">42</span><span class="p">],</span> <span class="n">categorical_names</span><span class="o">=</span><span class="p">{</span><span class="mi">2</span><span class="p">:[</span><span class="s2">&quot;Male&quot;</span><span class="p">,</span><span class="s2">&quot;Female&quot;</span><span class="p">]})</span>
</pre></div>
</div>
<p>The key of the categorical_names parameter is the index of the feature, with the value being a list of all the possible values it can take.</p>
</div>
<div class="section" id="requisites">
<h2>Requisites<a class="headerlink" href="#requisites" title="Permalink to this headline">Â¶</a></h2>
<p>The explainer requires the training data, the predict function of the model and an instance to explain.</p>
</div>
<div class="section" id="accepted-models-data">
<h2>Accepted Models/Data<a class="headerlink" href="#accepted-models-data" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">Â¶</a></h3>
<p>Currently supported datatypes are:</p>
<ul class="simple">
<li><p>Tabular data</p></li>
<li><p>Image data</p></li>
<li><p>Text data</p></li>
</ul>
<p>As tabular data is the only one of these currently in scope, within this type the values are recognised as either:</p>
<ul class="simple">
<li><p>Numerical</p></li>
<li><p>Categorical</p></li>
</ul>
</div>
<div class="section" id="models">
<h3>Models<a class="headerlink" href="#models" title="Permalink to this headline">Â¶</a></h3>
<p>As the explainer only requires the predict function to be passed as a parameter, in theory any model can be used.</p>
</div>
</div>
<div class="section" id="dimensionality">
<h2>Dimensionality<a class="headerlink" href="#dimensionality" title="Permalink to this headline">Â¶</a></h2>
<p>blah blah blah</p>
</div>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">Â¶</a></h2>
<p>When using Anchors you may find that you will struggle to find useful explanations for some complex problems,
as the number of conditions required increases, or the precision/coverage decreases.</p>
<p>It is also possible for the same instance to give two different explanations. The creator of this technique says its unlikely however and can be mitigated by
increasing the precision threshold.</p>
<p>You will find that in regression problems, the explainer will often spit out explanations for which it is 0% confident. This is due to the continuous nature of regression, however
this can be worked around by first transforming the targets into classes before training your model. Increasing the number of you classes you choose here will give you a greater
prediction accuracy but will inevitably give you a less useful Anchor explanation, either because the confidence rating will drop, or more conditions will be used.</p>
<p>Also donâ€™t call this function more than once unless you <strong>really</strong> like ValueErrors. <strong>&lt;TODO&gt;</strong></p>
</div>
<div class="section" id="output-interpretation">
<h2>Output interpretation<a class="headerlink" href="#output-interpretation" title="Permalink to this headline">Â¶</a></h2>
<p>The function itself returns two variables. The first is the explanation object generated by the Anchor explainer, and the second uses this explanation
and interprets it in plain English.</p>
<p>This human-readable explanation looks as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">IF</span>      <span class="n">petal</span> <span class="n">length</span> <span class="p">(</span><span class="n">cm</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">4.30</span>
<span class="n">AND</span>     <span class="n">petal</span> <span class="n">width</span> <span class="p">(</span><span class="n">cm</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">0.30</span>
<span class="n">THEN</span> <span class="n">PREDICT</span> <span class="n">Class</span> <span class="mi">1</span> <span class="n">WITH</span> <span class="mf">100.0</span><span class="o">%</span> <span class="n">CONFIDENCE</span><span class="o">.</span>
<span class="n">THIS</span> <span class="n">EXPLANATION</span> <span class="n">APPLIES</span> <span class="n">TO</span> <span class="mf">24.73</span><span class="o">%</span> <span class="n">OF</span> <span class="n">THE</span> <span class="n">TRAINING</span> <span class="n">DATA</span><span class="o">.</span>
</pre></div>
</div>
<p>There is clearly a trade-off with precision and coverage with these explanations. You could choose to set the precision threshold lower and explain more instances
but less accurately, or you can attempt to explain what is specifically happening in a subset of the data.</p>
<p>The explanation object returned has a method <code class="docutils literal notranslate"><span class="pre">exp.examples()</span></code> which will return all instances in the training data for which the explanation applies.
You can further specify whether you want to show only the falsely classified, or the correctly classified.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="summaries.html" class="btn btn-neutral float-right" title="Summaries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pdp.html" class="btn btn-neutral float-left" title="Partial Dependence Plots (PDP)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Sam McWilliams

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>